var ascii=document.querySelectorAll('.ascii');ascii.forEach(function(ascii){var asciiLines=ascii.querySelectorAll('pre');var colorSpans;var configs=[];var asciiColorType=ascii.getAttribute('ascii_color_type');var asciiInterval=Number(ascii.getAttribute('ascii_interval'));var hasAsciiInterval=ascii.hasAttribute('ascii_interval');var asciiCharacters=ascii.getAttribute('ascii_characters').split(',');function randomColor(){function colorGen(value1,value2,value3){return[Math.floor(Math.random()*value1),Math.floor(Math.random()*value2),Math.floor(Math.random()*value3)]}if(asciiColorType==='hsl'){return colorGen(360,100,100);}else{return colorGen(255,255,255)}}function calculateSteps(config){config.colorSteps=[];config.endColor.forEach(function(color,colorIndex){config.colorSteps.push(Math.floor((color-config.startColor[colorIndex])/asciiLines.length-config.shadowCorrection))})}function setCurrentColor(line,lineIndex,config,configIndex){if(lineIndex===0){config.currentColor=config.startColor}else if(lineIndex+1===asciiLines.length){config.currentColor=config.endColor}else{config.currentColor.forEach(function(color,colorIndex){config.currentColor[colorIndex]=color+config.colorSteps[colorIndex]})}}function characterCrawler(lineArray){var lastCharacter='';lineArray.forEach(function(character,characterIndex){var beginning='';var closure='';configs.forEach(function(config,configIndex){if(config.characters.includes(lastCharacter)&&!config.characters.includes(character)){closure+='</span>'}else if(!config.characters.includes(lastCharacter)&&config.characters.includes(character)){beginning+='<span class="ascii'+configIndex+'">'}});lineArray[characterIndex]=closure+beginning+character;lastCharacter=character})}function lineCrawler(){asciiLines.forEach(function(line,lineIndex){var lineArray=line.innerHTML.split('');characterCrawler(lineArray);line.innerHTML=lineArray.join('')})}function setColor(asciiLines,asciiColorType){configs.forEach(function(config,configIndex){calculateSteps(config);asciiLines.forEach(function(line,lineIndex){setCurrentColor(line,lineIndex,config,configIndex);var asciiSelection=line.querySelectorAll('.ascii'+configIndex);asciiSelection.forEach(function(ascii){ascii.style.color='rgb('+config.currentColor+')'})})})}asciiCharacters.forEach(function(config){configs.push({characters:config.split(''),startColor:randomColor(),endColor:randomColor(),shadowCorrection:0})});lineCrawler();colorSpans=ascii.querySelectorAll('span');colorSpans.forEach(function(span){span.style.transition='color '+asciiInterval+'s linear'});setColor(asciiLines,asciiColorType);if(asciiInterval>0||hasAsciiInterval){window.setInterval(function(){asciiCharacters.forEach(function(config,configID){configs[configID].startColor=randomColor();configs[configID].endColor=randomColor()});setColor(asciiLines,asciiColorType)},asciiInterval*1000)}});